---
layout: page
title: Geocoding
description: From text to coordinates
header-img: img/kiev_bg.png
filename: pg02
lang: ru
---

Geocoding
=========
Our geocoding process used place names and administrative unit information in a query to the [GeoNames.org search API](http://www.geonames.org/export/geonames-search.html) to produce viable matches between the cities and towns talked about in our source text and the geographic entities returned by our search. In about 35% of our entries, the search produced only one response, meaning that there was only one town with that name in that area. The remaining entries produced more than one result in the search, and needed manual intervention to determine which, if any, result was the correct one. 

Administrative divisions
------------------------
We used administrative divisions as a primary means of narrowing our search criteria because administrative divisions are explicit in ~95% of entries. To create the bounding boxes, we either took the administrative seat of the unit as a center and searched in an 8&deg; by 8&deg; box centered on that city, or we used contemporaneous maps to establish more accurate, manual bounding boxes. The creation of the bounding boxes was relatively labor-intensive, but worthwhile, as it allowed for the automatic geocoding of ~250 entries. Ideally, these bounding boxes would be usable in a number of projects, increasing their value. Unfortunately, the administrative divisions of this time period only existed by decree for 19 years, and in practice for less time, limiting the value of the creation of bounding boxes.

Name Variation
--------------
Many of the entries in our text source had slightly different names than their modern counterparts, either due to drifting language or the fact that some cities and towns were part of the Russian Empire at the time, but are now part of independent nations who speak different languages. To deal with this, we used Geonames' "fuzzy search" option. This makes the search include locations whose names have a certain percentage of letters in common with the search term. In the script used, the value for the "fuzziness" was gradually decreased, allowing for names with less and less similarity, until a search with results was returned. This way, every search produced at least a starting point for identification, and at best an immediately usable result.

Manual Reconciliation
---------------------
In order to establish links between our text entries and geonames entities, we had to determine with some amount of research which modern location corresponds to the text entry in question. To facilitate this process, responses from geonames were parsed into GeoJSON files and saved, then pushed to github with other changes from the geocoding process. This allowed us to look at the results of our searches on a map, so that we could more easily identify which of the search results were in fact the town we were looking for. When a confident match was found, the IDs for the text and GeoNames entities could be put into a script to add this geographic information to our dataset. These connections were made on the basis of information from a contemporaneous atlas, (both [a version from Harvard](http://pds.lib.harvard.edu/pds/view/21684875) and one from [Etomesto.ru](http://etomesto.ru/karta389/)), [Russian Wikipedia](https://ru.wikipedia.org/wiki/), the [Great Soviet Encyclopedia](https://ru.wikisource.org/wiki/%D0%91%D0%BE%D0%BB%D1%8C%D1%88%D0%B0%D1%8F_%D1%81%D0%BE%D0%B2%D0%B5%D1%82%D1%81%D0%BA%D0%B0%D1%8F_%D1%8D%D0%BD%D1%86%D0%B8%D0%BA%D0%BB%D0%BE%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F) and the [Brockhaus and Efron Encyclopedia](https://ru.wikisource.org/wiki/%D0%AD%D0%BD%D1%86%D0%B8%D0%BA%D0%BB%D0%BE%D0%BF%D0%B5%D0%B4%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D1%81%D0%BB%D0%BE%D0%B2%D0%B0%D1%80%D1%8C_%D0%91%D1%80%D0%BE%D0%BA%D0%B3%D0%B0%D1%83%D0%B7%D0%B0_%D0%B8_%D0%95%D1%84%D1%80%D0%BE%D0%BD%D0%B0).